{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function serverRequest(url, params) {\n    const MY_API_KEY = \"46875254-682524027d328dbaad660da8e\";\n    try {\n        const { data } = await axios(url, {\n            params: {\n                key: MY_API_KEY,\n                ...params,\n            },\n        });\n        return data;\n    }\n    catch (error) {\n        throw error;\n     }\n    \n}","export function renderMarkup(arr) {\n    return arr\n        .map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n            return `\n       <li class=\"gallery-item\">\n       <a href=\"${largeImageURL}\">\n        <img\n        class = \"gallery-image\"\n        src = \"${webformatURL}\"\n        data-source = \"${largeImageURL}\"\n        alt = \"${tags}\"\n        width= 360;\n        height= 200;\n        />\n        </a>\n        <div class=\"main-review-container\">\n         <div class=\"review-container\">\n         <h3 class=\"review-header\">Likes</h3>\n         <p class=\"review-text\">${likes}</p>\n         </div>\n         <div class=\"review-container\">\n         <h3 class=\"review-header\">Views</h3>\n         <p class=\"review-text\">${views}</p>\n         </div>\n         <div class=\"review-container\">\n         <h3 class=\"review-header\">Comments</h3>\n         <p class=\"review-text\">${comments}</p>\n         </div>\n         <div class=\"review-container\">\n         <h3 class=\"review-header\">Downloads</h3>\n         <p class=\"review-text\">${downloads}</p>\n         </div>\n          </div>\n        </li>\n        \n        `}).join(\"\");\n    \n}\n","\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { serverRequest } from \"./js/pixabay-api\";\nimport { renderMarkup } from \"./js/render-functions\";\n\nconst BASE_URL = \"https://pixabay.com/api/\"\nlet page = 1;\nlet per_page = 15;\nlet query = \"\";\n\nconst loader = document.querySelector(\".loader\")\n\nconst loadMore = document.querySelector(\".js-load-more\");\n\nconst form = document.querySelector(\".search-form\")\n\nconst list = document.querySelector(\".gallery-list\")\n\n\nform.addEventListener(\"submit\", onSubmit);\n\nloadMore.addEventListener(\"click\", onLoadMore);\n\n\n function onSubmit(event) {\n    event.preventDefault();\n     page = 1;\n     \n    query = document.querySelector(\".search-input\").value.trim();\n    if (query === \"\") {\n        return;\n    }\n    loader.textContent = \"Loading images, please wait...\"\n    form.reset()\n    \n    const params = new URLSearchParams({\n    q: query,\n    image_type: \"photo\",\n    orientation:\"horizontal\",\n    safesearch: \"true\",\n    page,\n    per_page\n})\n\n    list.innerHTML = \"\";\n\n    serverRequest(`${BASE_URL}?${params}`)\n        .then(data => {\n            if (data.hits.length === 0) {\n                iziToast.warning({\n                    title: 'Caution',\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                });\n            }\n            else {\n                \n                list.insertAdjacentHTML(\"beforeend\", renderMarkup(data.hits))\n            };\n            const simpleLightBox = new SimpleLightbox(`.gallery a`, {\n                captionsData: 'alt',\n                captionDelay: 250,\n            });\n            simpleLightBox.refresh();\n            if(page * per_page < data.totalHits) {\n            loadMore.classList.replace(\"load-more-hidden\", \"load-more\");\n            };\n\n        })\n        .catch(error => {\n            console.log(error);\n        \n        })\n    .finally(() => {\nloader.textContent = \"\"\n    })\n     \n}\n\n    async function onLoadMore() {\n        page += 1;\n         loadMore.disabled = true;\n        const params = new URLSearchParams({\n            q: query,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: \"true\",\n            page,\n            per_page\n     })\n   \n    try {\n        const data = await serverRequest(`${BASE_URL}?${params}`);\n        console.log(data);\n        list.insertAdjacentHTML(\"beforeend\", renderMarkup(data.hits))\n        if (page * per_page >= data.totalHits) {\n            iziToast.warning({\n                    title: 'Caution',\n                    message: \"We're sorry, but you've reached the end of search results.\"\n                });\n            loadMore.classList.replace(\"load-more\", \"load-more-hidden\");\n        }\n        const card = document.querySelector(\".gallery-item\");\n        const cardHeight = card.getBoundingClientRect().height;\n        window.scrollBy({\n            left: 0,\n            top: cardHeight*4,\n            behavior: \"smooth\"\n        })\n    }\n    catch (error) {\n        alert(error.message)\n        }\n        finally {\n        loadMore.disabled = false;\n    }\n    }\n"],"names":["serverRequest","url","params","MY_API_KEY","data","axios","error","renderMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","BASE_URL","page","per_page","query","loader","loadMore","form","list","onSubmit","onLoadMore","event","iziToast","SimpleLightbox","cardHeight"],"mappings":"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"}